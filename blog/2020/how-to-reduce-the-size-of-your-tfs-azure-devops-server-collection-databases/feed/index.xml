<?xml version="1.0" encoding="UTF-8"?><rss version="2.0"
	xmlns:content="http://purl.org/rss/1.0/modules/content/"
	xmlns:dc="http://purl.org/dc/elements/1.1/"
	xmlns:atom="http://www.w3.org/2005/Atom"
	xmlns:sy="http://purl.org/rss/1.0/modules/syndication/"
	
	>
<channel>
	<title>
	Comments on: How to reduce the size of your TFS/Azure DevOps Server collection databases	</title>
	<atom:link href="https://marcusfelling.com/blog/blog/2020/how-to-reduce-the-size-of-your-tfs-azure-devops-server-collection-databases/feed/" rel="self" type="application/rss+xml" />
	<link>https://marcusfelling.com/blog/blog/2020/how-to-reduce-the-size-of-your-tfs-azure-devops-server-collection-databases/</link>
	<description>A blog about things I learn at the keyboard: DevOps, CI/CD, Cloud, Automation, to name a few....</description>
	<lastBuildDate>Wed, 11 Dec 2024 09:15:04 +0000</lastBuildDate>
	<sy:updatePeriod>
	hourly	</sy:updatePeriod>
	<sy:updateFrequency>
	1	</sy:updateFrequency>
	<generator>https://wordpress.org/?v=6.7.1</generator>
	<item>
		<title>
		By: Edwin		</title>
		<link>https://marcusfelling.com/blog/blog/2020/how-to-reduce-the-size-of-your-tfs-azure-devops-server-collection-databases/#comment-50595</link>

		<dc:creator><![CDATA[Edwin]]></dc:creator>
		<pubDate>Wed, 11 Dec 2024 09:15:04 +0000</pubDate>
		<guid isPermaLink="false">https://marcusfelling.com/blog/?p=891#comment-50595</guid>

					<description><![CDATA[In reply to &lt;a href=&quot;https://marcusfelling.com/blog/blog/2020/how-to-reduce-the-size-of-your-tfs-azure-devops-server-collection-databases/#comment-50465&quot;&gt;tshk!&lt;/a&gt;.

I&#039;ve had the same problem with test results. You could try the following. It worked for us. (After this it could take a while for the cleanup job actually deletes the runs)

#get test run
$tvsprojecturi = &quot;https://azuredevopsserver/tfs/DefaultCollection/PROJECT&quot;
#get top 5000 runs

$top5000Url =  &quot;$azuredevopsprojecturi/_apis/test/runs?api-version=6.0&#038;`$top=5000&quot;
$arti = invoke-restmethod  $top5000Url -UseDefaultCredentials -Verbose

foreach($runUri in $arti.value.url)
{
     #check first if you want to delete this run
     Invoke-RestMethod  -method Delete -Uri &quot;$($runUri)?api-version=6.0&quot; -UseDefaultCredentials -Verbose
}]]></description>
			<content:encoded><![CDATA[<p>In reply to <a href="https://marcusfelling.com/blog/blog/2020/how-to-reduce-the-size-of-your-tfs-azure-devops-server-collection-databases/#comment-50465">tshk!</a>.</p>
<p>I&#8217;ve had the same problem with test results. You could try the following. It worked for us. (After this it could take a while for the cleanup job actually deletes the runs)</p>
<p>#get test run<br />
$tvsprojecturi = &#8220;https://azuredevopsserver/tfs/DefaultCollection/PROJECT&#8221;<br />
#get top 5000 runs</p>
<p>$top5000Url =  &#8220;$azuredevopsprojecturi/_apis/test/runs?api-version=6.0&amp;`$top=5000&#8221;<br />
$arti = invoke-restmethod  $top5000Url -UseDefaultCredentials -Verbose</p>
<p>foreach($runUri in $arti.value.url)<br />
{<br />
     #check first if you want to delete this run<br />
     Invoke-RestMethod  -method Delete -Uri &#8220;$($runUri)?api-version=6.0&#8221; -UseDefaultCredentials -Verbose<br />
}</p>
]]></content:encoded>
		
			</item>
		<item>
		<title>
		By: tshk!		</title>
		<link>https://marcusfelling.com/blog/blog/2020/how-to-reduce-the-size-of-your-tfs-azure-devops-server-collection-databases/#comment-50465</link>

		<dc:creator><![CDATA[tshk!]]></dc:creator>
		<pubDate>Wed, 28 Aug 2024 12:54:28 +0000</pubDate>
		<guid isPermaLink="false">https://marcusfelling.com/blog/?p=891#comment-50465</guid>

					<description><![CDATA[It would be great to have an upgraded version of this post for DevOps 2022 onpremise. My DB weights 3tb.. im fighting to shrink it.. i have 2 millions of test results marked for deletion but they don&#039;t get deleted.]]></description>
			<content:encoded><![CDATA[<p>It would be great to have an upgraded version of this post for DevOps 2022 onpremise. My DB weights 3tb.. im fighting to shrink it.. i have 2 millions of test results marked for deletion but they don&#8217;t get deleted.</p>
]]></content:encoded>
		
			</item>
		<item>
		<title>
		By: DP		</title>
		<link>https://marcusfelling.com/blog/blog/2020/how-to-reduce-the-size-of-your-tfs-azure-devops-server-collection-databases/#comment-50449</link>

		<dc:creator><![CDATA[DP]]></dc:creator>
		<pubDate>Fri, 23 Aug 2024 03:38:55 +0000</pubDate>
		<guid isPermaLink="false">https://marcusfelling.com/blog/?p=891#comment-50449</guid>

					<description><![CDATA[Do you by chance know what the cleanup SQL commands are for 2022? The database on DevOps doesn&#039;t know the stored procedure &quot;prc_CleanupDeletedFileContent&quot;. Thanks!]]></description>
			<content:encoded><![CDATA[<p>Do you by chance know what the cleanup SQL commands are for 2022? The database on DevOps doesn&#8217;t know the stored procedure &#8220;prc_CleanupDeletedFileContent&#8221;. Thanks!</p>
]]></content:encoded>
		
			</item>
		<item>
		<title>
		By: DC		</title>
		<link>https://marcusfelling.com/blog/blog/2020/how-to-reduce-the-size-of-your-tfs-azure-devops-server-collection-databases/#comment-42536</link>

		<dc:creator><![CDATA[DC]]></dc:creator>
		<pubDate>Tue, 11 Oct 2022 10:26:08 +0000</pubDate>
		<guid isPermaLink="false">https://marcusfelling.com/blog/?p=891#comment-42536</guid>

					<description><![CDATA[I don&#039;t think I&#039;ve ever laughed so hard at a picture this early in the morning. Thank you for that.]]></description>
			<content:encoded><![CDATA[<p>I don&#8217;t think I&#8217;ve ever laughed so hard at a picture this early in the morning. Thank you for that.</p>
]]></content:encoded>
		
			</item>
		<item>
		<title>
		By: bluzk		</title>
		<link>https://marcusfelling.com/blog/blog/2020/how-to-reduce-the-size-of-your-tfs-azure-devops-server-collection-databases/#comment-38742</link>

		<dc:creator><![CDATA[bluzk]]></dc:creator>
		<pubDate>Thu, 12 May 2022 12:30:59 +0000</pubDate>
		<guid isPermaLink="false">https://marcusfelling.com/blog/?p=891#comment-38742</guid>

					<description><![CDATA[In reply to &lt;a href=&quot;https://marcusfelling.com/blog/blog/2020/how-to-reduce-the-size-of-your-tfs-azure-devops-server-collection-databases/#comment-14057&quot;&gt;Bernhard&lt;/a&gt;.

I tryed it on 2020 and it&#039;s work perfectly ;)]]></description>
			<content:encoded><![CDATA[<p>In reply to <a href="https://marcusfelling.com/blog/blog/2020/how-to-reduce-the-size-of-your-tfs-azure-devops-server-collection-databases/#comment-14057">Bernhard</a>.</p>
<p>I tryed it on 2020 and it&#8217;s work perfectly ðŸ˜‰</p>
]]></content:encoded>
		
			</item>
		<item>
		<title>
		By: Ricardo Camara		</title>
		<link>https://marcusfelling.com/blog/blog/2020/how-to-reduce-the-size-of-your-tfs-azure-devops-server-collection-databases/#comment-38740</link>

		<dc:creator><![CDATA[Ricardo Camara]]></dc:creator>
		<pubDate>Thu, 12 May 2022 11:11:39 +0000</pubDate>
		<guid isPermaLink="false">https://marcusfelling.com/blog/?p=891#comment-38740</guid>

					<description><![CDATA[In reply to &lt;a href=&quot;https://marcusfelling.com/blog/blog/2020/how-to-reduce-the-size-of-your-tfs-azure-devops-server-collection-databases/#comment-14057&quot;&gt;Bernhard&lt;/a&gt;.

Little late, but for reference, there is [this](https://marketplace.visualstudio.com/items?itemName=TFSPowerToolsTeam.MicrosoftVisualStudioTeamFoundationServer2015Power) version, built for VS2015. Also: I believe the better solution would be using the [TfsConfig deleteTestResults](https://docs.microsoft.com/en-us/azure/devops/server/command-line/tfsconfig-cmd?view=azure-devops-2020#deletetestresults) command]]></description>
			<content:encoded><![CDATA[<p>In reply to <a href="https://marcusfelling.com/blog/blog/2020/how-to-reduce-the-size-of-your-tfs-azure-devops-server-collection-databases/#comment-14057">Bernhard</a>.</p>
<p>Little late, but for reference, there is [this](<a href="https://marketplace.visualstudio.com/items?itemName=TFSPowerToolsTeam.MicrosoftVisualStudioTeamFoundationServer2015Power" rel="nofollow ugc">https://marketplace.visualstudio.com/items?itemName=TFSPowerToolsTeam.MicrosoftVisualStudioTeamFoundationServer2015Power</a>) version, built for VS2015. Also: I believe the better solution would be using the [TfsConfig deleteTestResults](<a href="https://docs.microsoft.com/en-us/azure/devops/server/command-line/tfsconfig-cmd?view=azure-devops-2020#deletetestresults" rel="nofollow ugc">https://docs.microsoft.com/en-us/azure/devops/server/command-line/tfsconfig-cmd?view=azure-devops-2020#deletetestresults</a>) command</p>
]]></content:encoded>
		
			</item>
		<item>
		<title>
		By: Bernhard		</title>
		<link>https://marcusfelling.com/blog/blog/2020/how-to-reduce-the-size-of-your-tfs-azure-devops-server-collection-databases/#comment-14057</link>

		<dc:creator><![CDATA[Bernhard]]></dc:creator>
		<pubDate>Tue, 17 Nov 2020 08:34:39 +0000</pubDate>
		<guid isPermaLink="false">https://marcusfelling.com/blog/?p=891#comment-14057</guid>

					<description><![CDATA[Hi,
you refer to Microsoft Visual Studio Team Foundation Server 2013 Power Tools.
Can i use this on a Azure DevOps Server 2020?
Best regards]]></description>
			<content:encoded><![CDATA[<p>Hi,<br />
you refer to Microsoft Visual Studio Team Foundation Server 2013 Power Tools.<br />
Can i use this on a Azure DevOps Server 2020?<br />
Best regards</p>
]]></content:encoded>
		
			</item>
		<item>
		<title>
		By: New York Global Consultants		</title>
		<link>https://marcusfelling.com/blog/blog/2020/how-to-reduce-the-size-of-your-tfs-azure-devops-server-collection-databases/#comment-13068</link>

		<dc:creator><![CDATA[New York Global Consultants]]></dc:creator>
		<pubDate>Mon, 28 Sep 2020 06:57:11 +0000</pubDate>
		<guid isPermaLink="false">https://marcusfelling.com/blog/?p=891#comment-13068</guid>

					<description><![CDATA[TY for the useful info! I would not have gotten this otherwise!]]></description>
			<content:encoded><![CDATA[<p>TY for the useful info! I would not have gotten this otherwise!</p>
]]></content:encoded>
		
			</item>
	</channel>
</rss>
